#include <iostream>
#include <string>
using namespace std;

class node{
  int data;
  node *next;
  node *prev;
  public:
  node(int data,node *next=NULL,node *prev=NULL){
    this->data=data;
    this->next=next;
    this->prev=prev;
  }
  void setdata(int x){
    data=x;
  }
  void setnext(node *n){
    next=n;
  }
  void setprev(node *p){
    prev=p;
  }
  int getdata(){
    return data;
  }
  node * getnext(){
    return next;
  }
  node * getprev(){
    return prev;
  }
};

class dll{
  node *tail;
  node *head;
  int no_of_items;
  public:
  dll(node *head=NULL,node *tail=NULL){
    this->head=head;
    this->tail=tail;
    no_of_items=0;
  }
  bool isempty(){
    return no_of_items==0;
  }
  int size(){
    return no_of_items;
  }
  void insert_head(int x){
    node *n=new node(x,head);
    if(head!=NULL){
      head->setprev(NULL);
    }
    head=n;
    if(tail==NULL){
      tail=n;
    }
    no_of_items++;
  }
  void insert_tail(int x){
    if(isempty()){
      insert_head(x);
      return;
    }
    node *n=new node(x);
    node *temp=tail;
    temp->setnext(n);
    tail=n;
    tail->setprev(temp);
    no_of_items++;
  }
  void insert_at(int x,int pos){
    if(pos<0||pos>=no_of_items){
      cout<<"Invalid position!!\n";
      return;
    }
    if(pos==0){
      insert_head(x);
      return;
    }
    if(pos==no_of_items-1){
      insert_tail(x);
      return;
    }
    int a=pos-2;
    node *temp=head;
    while(a>0){
      temp=temp->getnext();
      a--;
    }
    node *n=new node(x);
    node *nextnode=temp->getnext();
    temp->setnext(n);
    n->setprev(temp);
    n->setnext(nextnode);
    nextnode->setprev(n);
    no_of_items++;
  }
  
  void display(){
    node *temp=head;
    while(temp!=NULL){
      cout<<temp->getdata()<<" ";
      temp=temp->getnext();
    }
    cout<<endl;
  }
};

int main() 
{
  dll obj;
  cout<<"Insert at head:\n";
  obj.insert_head(23);
  obj.insert_head(45);
  obj.insert_head(78);
  obj.display();
  cout<<"Insert at tail:\n";
  obj.insert_tail(53);
  obj.insert_tail(89);
  obj.display();
  cout<<"Inserting at a position:\n";
  obj.insert_at(100,3);
  obj.display();
  return 0;
}
